<mat-spinner class="mx-auto my-5 py-5" *ngIf="!isLoading"></mat-spinner>

<div *ngIf="isLoading" id="signupForm" #signupForm class="container">
  <!-- <div class="text-center">
      <img  style="height: 80px; width: 80px;" class="p-0 my-5 border-0 img-thumbnail rounded-circle mx-auto" src="{{profile.pictureUrl}}" />
    </div> -->

  <div class="row justify-content-center mt-4">
    <div class="col-md-4">
      <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <input #userId id="userId" hidden class="form-control" type="text" formControlName="userId" required />
        </div>
        <div class="form-group">
          <input #userEmail id="userEmail" hidden class="form-control" type="text" formControlName="userEmail" />
        </div>

        <mat-form-field MatFormField Control class="w-100 example-full-width" appearance="fill">
          <mat-label>ชื่อนามสกุล</mat-label>
          <input matInput type="text" formControlName="userName" required />
        </mat-form-field>

        <mat-form-field MatFormFieldControl class="p-0 w-100" appearance="fill">
          <mat-label>หมายเลขโทรศัพท์</mat-label>
          <input matInput class="p-0" type="tel" minlength="10" maxlength="10" formControlName="userPhoneNumber" required />
        </mat-form-field>
        <small id="phoneError" class="text-danger" #phoneError> เบอร์โทรศัพท์อยู่ในระบบแล้ว </small>

        <div class="form-group">
          <button mat-raised-button type="button" #popupbtn id="popupbtn" color="primary" class="w-100" data-bs-toggle="modal" data-bs-target="#exampleModal">สมัคร</button>
        </div>
        <input class="p-0" type="text" [(ngModel)]="this.saveUsername" hidden formControlName="userConsent" />

        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Modal title</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p>Modal body text goes here.</p>

                <mat-checkbox #saveUserNameCheckBox id="saveUserNameCheckBox" color="primary" type="checkbox" [checked]="saveUsername" (change)="onSaveUsernameChanged(saveUserNameCheckBox.checked)">Checked</mat-checkbox>

                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary">Close</button>
                  <button mat-raised-button color="primary" data-bs-dismiss="modal" (click)="onSubmit()" [disabled]="!saveUsername">Agree</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<div id="otpform" #otpform class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-4">
      <form [formGroup]="otpForm" (ngSubmit)="otpSubmit()">
        <mat-form-field MatFormField Control class="w-100 example-full-width" appearance="fill">
          <mat-label>OTP</mat-label>
          <input matInput type="number" formControlName="otpConfirm" required />
        </mat-form-field>
        <div class="form-group">
          <button mat-raised-button class="w-100" color="primary" type="submit">Confirm</button>
        </div>
      </form>
    </div>
  </div>
</div>
